/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
var editedID = 0;
var editMode = false;

function getNewID() {
  return new Date().getTime().toString();
}

function addItem() {
  var title = getValue('title-input');

  if (title == '') {
    alert('cant add an item without a title');
    return;
  }

  if (editMode) {
    alert('cant add an item while in edit mode');
    return;
  }

  var content = getValue('content-input');
  var list = document.getElementById('list');
  var id = getNewID();
  var itemElement = createTodoItemElement(id, title, content);
  list.appendChild(itemElement); // now save to local storage

  var itemString = "title: ".concat(title, ";content: ").concat(content);
  localStorage.setItem(id, itemString); // reset menu display

  clearMenu();
  setInnerText('menu-button', 'Add');
}

function sendItemToEdit(itemID) {
  editedID = itemID;
  var title = getInnerText("title".concat(itemID));
  var content = getInnerText("content".concat(itemID));
  setValue('title-input', title);
  setValue('content-input', content);
  editMode = true;
  document.getElementById('cancel-button').hidden = false;
  setInnerText('menu-button', 'Apply');
}

function deleteItem(itemID) {
  if (editMode) {
    alert('cant delete while in edit mode');
    return;
  }

  var item = document.getElementById(itemID);
  var list = document.getElementById('list'); // remove from display

  list.removeChild(item); // remove from item storage

  localStorage.removeItem(itemID);
}

function cancelEdit() {
  clearMenu();
  editMode = false;
  setInnerText('menu-button', 'Add');
  document.getElementById('cancel-button').hidden = true;
  editedID = 0;
}

function clearMenu() {
  setValue('title-input', '');
  setValue('content-input', '');
}

function menuButtonClick() {
  if (!editMode) {
    // adding a new item
    addItem();
  } else {
    // editing an existing item
    if (getValue('title-input') == '') {
      alert('cant set an empty title');
      return;
    }

    var title = getValue('title-input');
    var content = getValue('content-input');
    setInnerText("title".concat(editedID), title);
    setInnerText("content".concat(editedID), content); // now update item in local storage

    var itemObject = "title: ".concat(title, ";content: ").concat(content);
    localStorage.setItem(editedID, itemObject); // revert menu back to default state

    clearMenu();
    editMode = false;
    setInnerText('menu-button', 'Add');
    document.getElementById('cancel-button').hidden = true;
    editedID = 0;
  }
}

function addButton() {
  clearMenu();
  document.getElementById('title-input').focus();
}

function getValue(id) {
  return document.getElementById(id).value;
}

function setValue(id, value) {
  document.getElementById(id).value = value;
}

function getInnerText(id) {
  return document.getElementById(id).innerText;
}

function setInnerText(id, text) {
  document.getElementById(id).innerText = text;
}

function createTodoItemElement(itemID, title, content) {
  // ol todo-item
  var itemElement = document.createElement('ol');
  itemElement.className = 'todo-item';
  itemElement.id = itemID; // input checkbox

  var itemCheckboxElement = document.createElement('input');
  itemCheckboxElement.type = 'checkbox';
  itemCheckboxElement.className = 'item-checkbox'; // div todo-item-text

  var itemTextElement = createItemTextElement(itemID, title, content);
  var itemButtonsElement = createItemButtonsElement(itemID); // append checkbox, text and buttons to list-item

  itemElement.appendChild(itemCheckboxElement);
  itemElement.appendChild(itemTextElement);
  itemElement.appendChild(itemButtonsElement);
  return itemElement;
}

function createItemButtonsElement(itemID) {
  var itemButtonsElement = document.createElement('div');
  itemButtonsElement.className = 'todo-item-buttons'; // button edit

  var editButtonElement = document.createElement('button');
  editButtonElement.innerText = 'edit';
  editButtonElement.className = 'item-edit-button';

  editButtonElement.onclick = function () {
    // set menu to editing state
    editMode = true;
    editedID = itemID;
    document.getElementById('cancel-button').hidden = false;
    setInnerText('menu-button', 'Apply');
    var title = getInnerText("title".concat(itemID));
    var content = getInnerText("content".concat(itemID));
    setValue('title-input', title);
    setValue('content-input', content);
  }; // button delete


  var deleteButtonElement = document.createElement('button');
  deleteButtonElement.innerText = 'delete';
  deleteButtonElement.className = 'item-delete-button';
  deleteButtonElement.setAttribute('onclick', "deleteItem(".concat(itemID, ")"));

  deleteButtonElement.onclick = function () {
    if (editMode) {
      alert('cant delete while in edit mode');
      return;
    }

    var item = document.getElementById(itemID);
    var list = document.getElementById('list'); // remove from display

    list.removeChild(item); // remove from item storage

    localStorage.removeItem(itemID);
  }; // append the buttons to container


  itemButtonsElement.appendChild(editButtonElement);
  itemButtonsElement.appendChild(deleteButtonElement);
  return itemButtonsElement;
}

function createItemTextElement(itemID, title, content) {
  var itemTextElement = document.createElement('div');
  itemTextElement.className = 'todo-item-text'; // item title

  var titleElement = document.createElement('div');
  titleElement.innerText = title;
  titleElement.className = 'todo-item-title';
  titleElement.id = 'title' + itemID; // item content

  var contentElement = document.createElement('div');
  contentElement.innerText = content;
  contentElement.className = 'todo-item-content';
  contentElement.id = 'content' + itemID; // append text to parent container 

  itemTextElement.appendChild(titleElement);
  itemTextElement.appendChild(contentElement);
  return itemTextElement;
}

window.onload = function () {
  // attach functions to menu buttons
  document.getElementById('menu').addEventListener('keyup', function (event) {
    if (event.keyCode === 13) {
      document.getElementById('menu-button').click();
      document.getElementById('title-input').focus();
    }
  });
  document.getElementById('clear-button').onclick = clearMenu;
  document.getElementById('menu-button').onclick = menuButtonClick;
  document.getElementById('cancel-button').onclick = cancelEdit;
  document.getElementById('add-button').onclick = addButton; // load and display todo items from local storage

  var list = document.getElementById('list');

  for (var key in localStorage) {
    if (isNaN(Number(key))) continue;
    var itemString = localStorage.getItem(key).split(';');
    var title = itemString[0].split(':')[1];
    var content = itemString[1].split(':')[1];
    var itemElement = createTodoItemElement(Number(key), title, content);
    list.appendChild(itemElement);
  }
};
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUF1Q29DLE9BQXZDLEdBQWlEaEIsZUFBakQ7QUFDQXJCLEVBQUFBLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixlQUF4QixFQUF5Q29DLE9BQXpDLEdBQW1EakIsVUFBbkQ7QUFDQXBCLEVBQUFBLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixFQUFzQ29DLE9BQXRDLEdBQWdEZCxTQUFoRCxDQVhzQixDQVl0Qjs7QUFDQSxNQUFNeEIsSUFBSSxHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsTUFBeEIsQ0FBYjs7QUFDQSxPQUFLLElBQU0rQyxHQUFYLElBQWtCekMsWUFBbEIsRUFBZ0M7QUFDNUIsUUFBRzBDLEtBQUssQ0FBQ0MsTUFBTSxDQUFDRixHQUFELENBQVAsQ0FBUixFQUNJO0FBQ0osUUFBTTFDLFVBQVUsR0FBR0MsWUFBWSxDQUFDNEMsT0FBYixDQUFxQkgsR0FBckIsRUFBMEJJLEtBQTFCLENBQWdDLEdBQWhDLENBQW5CO0FBQ0EsUUFBTXpELEtBQUssR0FBR1csVUFBVSxDQUFDLENBQUQsQ0FBVixDQUFjOEMsS0FBZCxDQUFvQixHQUFwQixFQUF5QixDQUF6QixDQUFkO0FBQ0EsUUFBTXRELE9BQU8sR0FBR1EsVUFBVSxDQUFDLENBQUQsQ0FBVixDQUFjOEMsS0FBZCxDQUFvQixHQUFwQixFQUF5QixDQUF6QixDQUFoQjtBQUNBLFFBQU1qRCxXQUFXLEdBQUdDLHFCQUFxQixDQUFDOEMsTUFBTSxDQUFDRixHQUFELENBQVAsRUFBYXJELEtBQWIsRUFBbUJHLE9BQW5CLENBQXpDO0FBQ0FDLElBQUFBLElBQUksQ0FBQ00sV0FBTCxDQUFpQkYsV0FBakI7QUFDSDtBQUNKLENBdkJELEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yLXdlYnBhY2svLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGVkaXRlZElEID0gMDtcbmxldCBlZGl0TW9kZSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBnZXROZXdJRCgpe1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpXG59XG5mdW5jdGlvbiBhZGRJdGVtKCl7XG4gICAgY29uc3QgdGl0bGUgPSBnZXRWYWx1ZSgndGl0bGUtaW5wdXQnKVxuICAgIGlmICh0aXRsZSA9PSAnJyl7XG4gICAgICAgIGFsZXJ0KCdjYW50IGFkZCBhbiBpdGVtIHdpdGhvdXQgYSB0aXRsZScpXG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoZWRpdE1vZGUpe1xuICAgICAgICBhbGVydCgnY2FudCBhZGQgYW4gaXRlbSB3aGlsZSBpbiBlZGl0IG1vZGUnKVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IGdldFZhbHVlKCdjb250ZW50LWlucHV0JylcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKVxuICAgIGNvbnN0IGlkID0gZ2V0TmV3SUQoKVxuICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gY3JlYXRlVG9kb0l0ZW1FbGVtZW50KGlkLHRpdGxlLGNvbnRlbnQpXG5cbiAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW1FbGVtZW50KVxuICAgIC8vIG5vdyBzYXZlIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICBjb25zdCBpdGVtU3RyaW5nID0gYHRpdGxlOiAke3RpdGxlfTtjb250ZW50OiAke2NvbnRlbnR9YFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGlkLGl0ZW1TdHJpbmcpXG5cbiAgICAvLyByZXNldCBtZW51IGRpc3BsYXlcbiAgICBjbGVhck1lbnUoKVxuICAgIHNldElubmVyVGV4dCgnbWVudS1idXR0b24nLCdBZGQnKVxufVxuXG5mdW5jdGlvbiBzZW5kSXRlbVRvRWRpdChpdGVtSUQpe1xuICAgIFxuICAgIGVkaXRlZElEID0gaXRlbUlEXG4gICAgY29uc3QgdGl0bGUgPSBnZXRJbm5lclRleHQoYHRpdGxlJHtpdGVtSUR9YClcbiAgICBjb25zdCBjb250ZW50ID0gZ2V0SW5uZXJUZXh0KGBjb250ZW50JHtpdGVtSUR9YClcbiAgICBzZXRWYWx1ZSgndGl0bGUtaW5wdXQnLHRpdGxlKVxuICAgIHNldFZhbHVlKCdjb250ZW50LWlucHV0Jyxjb250ZW50KVxuICAgIFxuICAgIGVkaXRNb2RlID0gdHJ1ZVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtYnV0dG9uJykuaGlkZGVuID0gZmFsc2VcbiAgICBzZXRJbm5lclRleHQoJ21lbnUtYnV0dG9uJywnQXBwbHknKVxufVxuXG5mdW5jdGlvbiBkZWxldGVJdGVtKGl0ZW1JRCl7XG4gICAgaWYoZWRpdE1vZGUpe1xuICAgICAgICBhbGVydCgnY2FudCBkZWxldGUgd2hpbGUgaW4gZWRpdCBtb2RlJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpdGVtSUQpXG4gICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0JylcbiAgICAvLyByZW1vdmUgZnJvbSBkaXNwbGF5XG4gICAgbGlzdC5yZW1vdmVDaGlsZChpdGVtKVxuICAgIC8vIHJlbW92ZSBmcm9tIGl0ZW0gc3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGl0ZW1JRClcbn1cblxuZnVuY3Rpb24gY2FuY2VsRWRpdCgpe1xuICAgIGNsZWFyTWVudSgpXG4gICAgZWRpdE1vZGUgPSBmYWxzZVxuICAgIHNldElubmVyVGV4dCgnbWVudS1idXR0b24nLCdBZGQnKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtYnV0dG9uJykuaGlkZGVuID0gdHJ1ZVxuICAgIGVkaXRlZElEID0gMCAgXG59XG5cbmZ1bmN0aW9uIGNsZWFyTWVudSgpe1xuICAgIHNldFZhbHVlKCd0aXRsZS1pbnB1dCcsJycpXG4gICAgc2V0VmFsdWUoJ2NvbnRlbnQtaW5wdXQnLCcnKVxufVxuXG5mdW5jdGlvbiBtZW51QnV0dG9uQ2xpY2soKXtcbiAgICBpZighZWRpdE1vZGUpe1xuICAgICAgICAvLyBhZGRpbmcgYSBuZXcgaXRlbVxuICAgICAgICBhZGRJdGVtKClcbiAgICB9ZWxzZXtcbiAgICAgICAgLy8gZWRpdGluZyBhbiBleGlzdGluZyBpdGVtXG4gICAgICAgIGlmIChnZXRWYWx1ZSgndGl0bGUtaW5wdXQnKT09Jycpe1xuICAgICAgICAgICAgYWxlcnQoJ2NhbnQgc2V0IGFuIGVtcHR5IHRpdGxlJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZ2V0VmFsdWUoJ3RpdGxlLWlucHV0JylcbiAgICAgICAgY29uc3QgY29udGVudCA9IGdldFZhbHVlKCdjb250ZW50LWlucHV0JylcbiAgICAgICAgc2V0SW5uZXJUZXh0KGB0aXRsZSR7ZWRpdGVkSUR9YCx0aXRsZSlcbiAgICAgICAgc2V0SW5uZXJUZXh0KGBjb250ZW50JHtlZGl0ZWRJRH1gLGNvbnRlbnQpXG4gICAgICAgIC8vIG5vdyB1cGRhdGUgaXRlbSBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAgIGNvbnN0IGl0ZW1PYmplY3QgPSBgdGl0bGU6ICR7dGl0bGV9O2NvbnRlbnQ6ICR7Y29udGVudH1gXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGVkaXRlZElELGl0ZW1PYmplY3QpXG4gICAgICAgIC8vIHJldmVydCBtZW51IGJhY2sgdG8gZGVmYXVsdCBzdGF0ZVxuICAgICAgICBjbGVhck1lbnUoKVxuICAgICAgICBlZGl0TW9kZSA9IGZhbHNlXG4gICAgICAgIHNldElubmVyVGV4dCgnbWVudS1idXR0b24nLCdBZGQnKVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLWJ1dHRvbicpLmhpZGRlbiA9IHRydWVcbiAgICAgICAgZWRpdGVkSUQgPSAwXG4gICAgfVxufVxuZnVuY3Rpb24gYWRkQnV0dG9uKCl7XG4gICAgY2xlYXJNZW51KClcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUtaW5wdXQnKS5mb2N1cygpXG59XG5mdW5jdGlvbiBnZXRWYWx1ZShpZCl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZVxufVxuZnVuY3Rpb24gc2V0VmFsdWUoaWQsdmFsdWUpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZSA9IHZhbHVlXG59XG5mdW5jdGlvbiBnZXRJbm5lclRleHQoaWQpe1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuaW5uZXJUZXh0XG59XG5mdW5jdGlvbiBzZXRJbm5lclRleHQoaWQsdGV4dCl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmlubmVyVGV4dCA9IHRleHRcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRvZG9JdGVtRWxlbWVudChpdGVtSUQsdGl0bGUsY29udGVudCl7XG4gICAgLy8gb2wgdG9kby1pdGVtXG4gICAgY29uc3QgaXRlbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbCcpXG4gICAgaXRlbUVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvZG8taXRlbSdcbiAgICBpdGVtRWxlbWVudC5pZCA9IGl0ZW1JRDtcbiAgICAvLyBpbnB1dCBjaGVja2JveFxuICAgIGNvbnN0IGl0ZW1DaGVja2JveEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaXRlbUNoZWNrYm94RWxlbWVudC50eXBlID0gJ2NoZWNrYm94J1xuICAgIGl0ZW1DaGVja2JveEVsZW1lbnQuY2xhc3NOYW1lID0gJ2l0ZW0tY2hlY2tib3gnXG4gICAgLy8gZGl2IHRvZG8taXRlbS10ZXh0XG4gICAgY29uc3QgaXRlbVRleHRFbGVtZW50ID0gY3JlYXRlSXRlbVRleHRFbGVtZW50KGl0ZW1JRCx0aXRsZSxjb250ZW50KVxuICAgIGNvbnN0IGl0ZW1CdXR0b25zRWxlbWVudCA9IGNyZWF0ZUl0ZW1CdXR0b25zRWxlbWVudChpdGVtSUQpXG4gICAgLy8gYXBwZW5kIGNoZWNrYm94LCB0ZXh0IGFuZCBidXR0b25zIHRvIGxpc3QtaXRlbVxuICAgIGl0ZW1FbGVtZW50LmFwcGVuZENoaWxkKGl0ZW1DaGVja2JveEVsZW1lbnQpXG4gICAgaXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQoaXRlbVRleHRFbGVtZW50KVxuICAgIGl0ZW1FbGVtZW50LmFwcGVuZENoaWxkKGl0ZW1CdXR0b25zRWxlbWVudClcblxuICAgIHJldHVybiBpdGVtRWxlbWVudFxufVxuZnVuY3Rpb24gY3JlYXRlSXRlbUJ1dHRvbnNFbGVtZW50KGl0ZW1JRCl7XG5cbiAgICBjb25zdCBpdGVtQnV0dG9uc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGl0ZW1CdXR0b25zRWxlbWVudC5jbGFzc05hbWUgPSAndG9kby1pdGVtLWJ1dHRvbnMnXG4gICAgLy8gYnV0dG9uIGVkaXRcbiAgICBjb25zdCBlZGl0QnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZWRpdEJ1dHRvbkVsZW1lbnQuaW5uZXJUZXh0ID0gJ2VkaXQnXG4gICAgZWRpdEJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2l0ZW0tZWRpdC1idXR0b24nXG4gICAgZWRpdEJ1dHRvbkVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vIHNldCBtZW51IHRvIGVkaXRpbmcgc3RhdGVcbiAgICAgICAgZWRpdE1vZGUgPSB0cnVlXG4gICAgICAgIGVkaXRlZElEID0gaXRlbUlEXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtYnV0dG9uJykuaGlkZGVuID0gZmFsc2VcbiAgICAgICAgc2V0SW5uZXJUZXh0KCdtZW51LWJ1dHRvbicsJ0FwcGx5JylcbiAgICAgICAgY29uc3QgdGl0bGUgPSBnZXRJbm5lclRleHQoYHRpdGxlJHtpdGVtSUR9YClcbiAgICAgICAgY29uc3QgY29udGVudCA9IGdldElubmVyVGV4dChgY29udGVudCR7aXRlbUlEfWApXG4gICAgICAgIHNldFZhbHVlKCd0aXRsZS1pbnB1dCcsdGl0bGUpXG4gICAgICAgIHNldFZhbHVlKCdjb250ZW50LWlucHV0Jyxjb250ZW50KVxuICAgIH1cbiAgICAvLyBidXR0b24gZGVsZXRlXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZGVsZXRlQnV0dG9uRWxlbWVudC5pbm5lclRleHQgPSAnZGVsZXRlJ1xuICAgIGRlbGV0ZUJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2l0ZW0tZGVsZXRlLWJ1dHRvbidcbiAgICBkZWxldGVCdXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnb25jbGljaycsYGRlbGV0ZUl0ZW0oJHtpdGVtSUR9KWApXG4gICAgZGVsZXRlQnV0dG9uRWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoZWRpdE1vZGUpe1xuICAgICAgICAgICAgYWxlcnQoJ2NhbnQgZGVsZXRlIHdoaWxlIGluIGVkaXQgbW9kZScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRlbUlEKVxuICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKVxuICAgICAgICAvLyByZW1vdmUgZnJvbSBkaXNwbGF5XG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoaXRlbSlcbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gaXRlbSBzdG9yYWdlXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGl0ZW1JRClcbiAgICB9XG4gICAgLy8gYXBwZW5kIHRoZSBidXR0b25zIHRvIGNvbnRhaW5lclxuICAgIGl0ZW1CdXR0b25zRWxlbWVudC5hcHBlbmRDaGlsZChlZGl0QnV0dG9uRWxlbWVudClcbiAgICBpdGVtQnV0dG9uc0VsZW1lbnQuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uRWxlbWVudClcblxuICAgIHJldHVybiBpdGVtQnV0dG9uc0VsZW1lbnRcbn1cbmZ1bmN0aW9uIGNyZWF0ZUl0ZW1UZXh0RWxlbWVudChpdGVtSUQsdGl0bGUsY29udGVudCl7XG5cbiAgICBjb25zdCBpdGVtVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGl0ZW1UZXh0RWxlbWVudC5jbGFzc05hbWUgPSAndG9kby1pdGVtLXRleHQnXG4gICAgLy8gaXRlbSB0aXRsZVxuICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IHRpdGxlXG4gICAgdGl0bGVFbGVtZW50LmNsYXNzTmFtZSA9ICd0b2RvLWl0ZW0tdGl0bGUnXG4gICAgdGl0bGVFbGVtZW50LmlkID0gJ3RpdGxlJytpdGVtSURcbiAgICAvLyBpdGVtIGNvbnRlbnRcbiAgICBjb25zdCBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29udGVudEVsZW1lbnQuaW5uZXJUZXh0ID0gY29udGVudFxuICAgIGNvbnRlbnRFbGVtZW50LmNsYXNzTmFtZSA9ICd0b2RvLWl0ZW0tY29udGVudCdcbiAgICBjb250ZW50RWxlbWVudC5pZCA9ICdjb250ZW50JytpdGVtSURcbiAgICAvLyBhcHBlbmQgdGV4dCB0byBwYXJlbnQgY29udGFpbmVyIFxuICAgIGl0ZW1UZXh0RWxlbWVudC5hcHBlbmRDaGlsZCh0aXRsZUVsZW1lbnQpXG4gICAgaXRlbVRleHRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRlbnRFbGVtZW50KVxuXG4gICAgcmV0dXJuIGl0ZW1UZXh0RWxlbWVudFxufVxuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICAvLyBhdHRhY2ggZnVuY3Rpb25zIHRvIG1lbnUgYnV0dG9uc1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JykuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWJ1dHRvbicpLmNsaWNrKClcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZS1pbnB1dCcpLmZvY3VzKClcbiAgICAgICAgfVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyLWJ1dHRvbicpLm9uY2xpY2sgPSBjbGVhck1lbnVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1idXR0b24nKS5vbmNsaWNrID0gbWVudUJ1dHRvbkNsaWNrXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC1idXR0b24nKS5vbmNsaWNrID0gY2FuY2VsRWRpdFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtYnV0dG9uJykub25jbGljayA9IGFkZEJ1dHRvblxuICAgIC8vIGxvYWQgYW5kIGRpc3BsYXkgdG9kbyBpdGVtcyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKVxuICAgIGZvciAoY29uc3Qga2V5IGluIGxvY2FsU3RvcmFnZSkge1xuICAgICAgICBpZihpc05hTihOdW1iZXIoa2V5KSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgaXRlbVN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkuc3BsaXQoJzsnKVxuICAgICAgICBjb25zdCB0aXRsZSA9IGl0ZW1TdHJpbmdbMF0uc3BsaXQoJzonKVsxXVxuICAgICAgICBjb25zdCBjb250ZW50ID0gaXRlbVN0cmluZ1sxXS5zcGxpdCgnOicpWzFdXG4gICAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gY3JlYXRlVG9kb0l0ZW1FbGVtZW50KE51bWJlcihrZXkpLHRpdGxlLGNvbnRlbnQpXG4gICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbUVsZW1lbnQpXG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImVkaXRlZElEIiwiZWRpdE1vZGUiLCJnZXROZXdJRCIsIkRhdGUiLCJnZXRUaW1lIiwidG9TdHJpbmciLCJhZGRJdGVtIiwidGl0bGUiLCJnZXRWYWx1ZSIsImFsZXJ0IiwiY29udGVudCIsImxpc3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJpdGVtRWxlbWVudCIsImNyZWF0ZVRvZG9JdGVtRWxlbWVudCIsImFwcGVuZENoaWxkIiwiaXRlbVN0cmluZyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJjbGVhck1lbnUiLCJzZXRJbm5lclRleHQiLCJzZW5kSXRlbVRvRWRpdCIsIml0ZW1JRCIsImdldElubmVyVGV4dCIsInNldFZhbHVlIiwiaGlkZGVuIiwiZGVsZXRlSXRlbSIsIml0ZW0iLCJyZW1vdmVDaGlsZCIsInJlbW92ZUl0ZW0iLCJjYW5jZWxFZGl0IiwibWVudUJ1dHRvbkNsaWNrIiwiaXRlbU9iamVjdCIsImFkZEJ1dHRvbiIsImZvY3VzIiwidmFsdWUiLCJpbm5lclRleHQiLCJ0ZXh0IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIml0ZW1DaGVja2JveEVsZW1lbnQiLCJ0eXBlIiwiaXRlbVRleHRFbGVtZW50IiwiY3JlYXRlSXRlbVRleHRFbGVtZW50IiwiaXRlbUJ1dHRvbnNFbGVtZW50IiwiY3JlYXRlSXRlbUJ1dHRvbnNFbGVtZW50IiwiZWRpdEJ1dHRvbkVsZW1lbnQiLCJvbmNsaWNrIiwiZGVsZXRlQnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInRpdGxlRWxlbWVudCIsImNvbnRlbnRFbGVtZW50Iiwid2luZG93Iiwib25sb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Q29kZSIsImNsaWNrIiwia2V5IiwiaXNOYU4iLCJOdW1iZXIiLCJnZXRJdGVtIiwic3BsaXQiXSwic291cmNlUm9vdCI6IiJ9